<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>–ü–æ—Ä—Ç–∞–ª –∑–∞ –•—É–¥–æ–∂–Ω–∏—Ü–∏</title>
    <link rel="stylesheet" href="css/base.css?v=nc1">
    <link rel="stylesheet" href="css/login.css?v=nc1">
    <link rel="stylesheet" href="css/buttons.css?v=nc1">
    <link rel="stylesheet" href="css/assignments.css?v=nc1">
    <link rel="stylesheet" href="css/modals.css?v=nc1">
    <link rel="stylesheet" href="css/finances.css?v=nc1">
    <link rel="stylesheet" href="css/payments.css?v=nc1">
    <link rel="stylesheet" href="css/animations.css?v=nc1">
    <link rel="stylesheet" href="css/responsive.css?v=nc1">
    <link rel="stylesheet" href="css/contract.css?v=nc1">
</head>
<body>
    <div class="container">
        <div class="top-buttons">
            <button class="finances-btn" onclick="showFinances()">üí∞ –§–∏–Ω–∞–Ω—Å–∏</button>
            <button class="logout-btn" onclick="logout()">–ò–∑—Ö–æ–¥</button>
        </div>
        
        <!-- Login Screen -->
        <div id="loginScreen">
            <div class="logo">
                <h1>üé® –•—É–¥–æ–∂–Ω–∏—Ü–∏</h1>
                <p>–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –≤ –ø–æ—Ä—Ç–∞–ª–∞ –∑–∞ —Ö—É–¥–æ–∂–Ω–∏—Ü–∏</p>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <label for="artistNumber">–í—ä–≤–µ–¥–µ—Ç–µ –≤–∞—à–∏—è –Ω–æ–º–µ—Ä:</label>
                    <input type="text" id="artistNumber" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 12345">
                </div>
                <div class="input-group">
                    <label for="artistPassword">–í—ä–≤–µ–¥–µ—Ç–µ –≤–∞—à–∞—Ç–∞ –ø–∞—Ä–æ–ª–∞:</label>
                    <input type="password" id="artistPassword" placeholder="–í–∞—à–∞—Ç–∞ –ø–∞—Ä–æ–ª–∞">
                </div>
                <button class="login-btn" onclick="login()">–í—Ö–æ–¥</button>
                <div class="error-message" id="errorMessage">–ù–µ–≤–∞–ª–∏–¥–µ–Ω –Ω–æ–º–µ—Ä/–ø–∞—Ä–æ–ª–∞ –∏–ª–∏ –Ω—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –∑–∞–¥–∞–Ω–∏—è</div>
                <div class="loading" id="loading">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</div>
            </div>
        </div>

        <!-- Contract Wizard Screen -->
        <div id="contractWizard" style="display: none;">
            <h2 style="color:black;">üìÑ –î–æ–≥–æ–≤–æ—Ä –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ</h2>
            <div class="contract-banner">
                <div class="banner-title">–í–∞–∂–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ</div>
                <div class="banner-text">
                    "–û–±–Ω–æ–≤–∏—Ö–º–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∞. –©–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ–ø—ä–ª–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–≤–æ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—è –¥–æ–≥–æ–≤–æ—Ä. –¢–æ–∑–∏ –¥–æ–≥–æ–≤–æ—Ä —â–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –≤ –µ–ª–µ–∫—Ç—Ä–æ–Ω–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç –≤—ä–≤ –≤–∞—à–∏—è –ø—Ä–æ—Ñ–∏–ª –∏ –ø—Ä–∏ –µ–≤–µ–Ω—Ç—É–∞–ª–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –ø–æ–∫–∞–∑–∞–Ω –¥–∞ –ø—Ä–æ–µ–≤–µ—Ä—è–≤–∞—â–æ—Ç–æ –ª–∏—Ü–µ. –ó–∞ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ –Ω–∞–ø—Ä–µ–¥ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞ –ø–æ–ø—ä–ª–Ω–∏—Ç–µ –≤–∞—à–∏—Ç–µ –¥–∞–Ω–Ω–∏. –¢–µ —â–µ –±—ä–¥–∞—Ç —Å—ä—Ö—Ä–∞–Ω—è–≤–∞–Ω–∏ —Å–∏–≥—É—Ä–Ω–æ –∏ –Ω–∏–∫–æ–π –æ—Å–≤–µ–Ω —É–ø—Ä–∞–≤–∏—Ç–µ–ª—è \"–ê–ª–µ–∫—Å –ó–∞—Ö–∞—Ä–∏–µ–≤\" —â–µ –∏–º–∞ –¥–æ—Å—Ç—ä–ø –¥–æ —Ç—è—Ö"
                </div>
                <a class="banner-link" href="#" target="_blank">–ù–∞—É—á–∏ –ø–æ–≤–µ—á–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—è –¥–æ–≥–æ–≤–æ—Ä</a>
            </div>
            <div id="contractStep1" class="contract-step">
                <h3>–°—Ç—ä–ø–∫–∞ 1: –í—ä–≤–µ–¥–µ—Ç–µ –≤–∞—à–∏—Ç–µ –¥–∞–Ω–Ω–∏</h3>
                <div class="contract-form">
                    <div class="input-group">
                        <label for="contractFullName">–¢—Ä–∏—Ç–µ –∏–º–µ–Ω–∞ (–∫–∞–∫—Ç–æ —Å–∞ –≤ –ª–∏—á–Ω–∞—Ç–∞ –∫–∞—Ä—Ç–∞)</label>
                        <input type="text" id="contractFullName" placeholder="–í–∞—à–∏—Ç–µ —Ç—Ä–∏ –∏–º–µ–Ω–∞">
                    </div>
                    <div class="input-group">
                        <label for="contractEGN">–ï–ì–ù</label>
                        <input type="text" id="contractEGN" placeholder="–ï–ì–ù">
                    </div>
                    <div class="input-group">
                        <label for="contractAddress">–ü–æ—Å—Ç–æ—è–Ω–µ–Ω –∞–¥—Ä–µ—Å (–ø–æ –ª–∏—á–Ω–∞ –∫–∞—Ä—Ç–∞)</label>
                        <input type="text" id="contractAddress" placeholder="–ü–æ—Å—Ç–æ—è–Ω–µ–Ω –∞–¥—Ä–µ—Å (–ø–æ –ª–∏—á–Ω–∞ –∫–∞—Ä—Ç–∞)">
                    </div>
                    <div class="input-group">
                        <label for="contractIdNumber">–ù–æ–º–µ—Ä –Ω–∞ –ª–∏—á–Ω–∞ –∫–∞—Ä—Ç–∞ / –ø–∞—Å–ø–æ—Ä—Ç</label>
                        <input type="text" id="contractIdNumber" placeholder="–ù–æ–º–µ—Ä –Ω–∞ –õ–ö / –ø–∞—Å–ø–æ—Ä—Ç">
                    </div>
                    <div class="input-group">
                        <label for="contractIdIssueDate">–î–∞—Ç–∞ –Ω–∞ –∏–∑–¥–∞–≤–∞–Ω–µ</label>
                        <input type="date" id="contractIdIssueDate">
                    </div>
                    <div class="input-group">
                        <label for="contractIdIssuer">–ò–∑–¥–∞—Ç–µ–ª (–ú–í–†)</label>
                        <input type="text" id="contractIdIssuer" placeholder="–ú–í–† ...">
                    </div>
                    <div class="input-group">
                        <label for="contractSelfEmployed">–°–∞–º–æ–æ—Å–∏–≥—É—Ä—è–≤–∞—â–æ —Å–µ –ª–∏—Ü–µ (—Ä–µ–≥. –≤ –ù–ê–ü)</label>
                        <select id="contractSelfEmployed">
                            <option value="no">–ù–µ</option>
                            <option value="yes">–î–∞</option>
                        </select>
                    </div>
                </div>
                <div class="wizard-actions">
                    <button class="primary" onclick="goToContractPreview()">–ù–∞–ø—Ä–µ–¥</button>
                </div>
            </div>

            <div id="contractStep2" class="contract-step" style="display: none;">
                <h3>–°—Ç—ä–ø–∫–∞ 2: –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä–∞</h3>
                <div id="contractPreview" class="contract-preview"></div>
                <div class="wizard-actions">
                    <button class="secondary" onclick="backToContractForm()">–ù–∞–∑–∞–¥</button>
                    <button class="primary" onclick="goToContractSign()">–ü–æ–¥–ø–∏—Å</button>
                </div>
            </div>

            <div id="contractStep3" class="contract-step" style="display: none;">
                <h3>–°—Ç—ä–ø–∫–∞ 3: –ü–æ–¥–ø–∏—Å</h3>
                <div class="signature-box">
                    <canvas id="signaturePad" width="600" height="200"></canvas>
                    <div class="signature-actions">
                        <button class="secondary" onclick="clearSignature()">–ò–∑—á–∏—Å—Ç–∏</button>
                    </div>
                </div>
                <div class="wizard-actions">
                    <button class="secondary" onclick="backToContractPreview()">–ù–∞–∑–∞–¥</button>
                    <button class="primary" onclick="submitContract()">–ò–∑–ø—Ä–∞—Ç–∏</button>
                </div>
                <div id="contractSubmitStatus" class="contract-status" style="display:none;"></div>
            </div>
        </div>

        <!-- Assignments Screen -->
        <div id="assignmentsScreen" class="assignments">
            <h2>–í–∞—à–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è</h2>
            <div id="assignmentsList" class="assignment-grid">
                <!-- Assignments will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <span class="close-x" onclick="closeModal()">&times;</span>
            <img id="modalImage" class="modal-image" src="" alt="Assignment Image">
            <div class="modal-controls">
                <button class="modal-btn close" onclick="closeModal()">
                    ‚úï –ó–∞—Ç–≤–æ—Ä–∏
                </button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="confirmation-modal">
        <div class="confirmation-content">
            <h3>üé® –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</h3>
            <p>–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ —Å—Ç–µ –∑–∞–≤—ä—Ä—à–∏–ª–∏ —Ç–æ–≤–∞ –∑–∞–¥–∞–Ω–∏–µ?</p>
            <div class="confirmation-buttons">
                <button class="confirm-yes" onclick="confirmComplete()">
                    ‚úÖ –î–∞
                </button>
                <button class="confirm-no" onclick="cancelComplete()">
                    ‚ùå –ù–µ
                </button>
            </div>
        </div>
    </div>

    <!-- Finances Modal - Completely Redesigned -->
    <div id="financesModal" class="finances-modal">
        <div class="finances-content">
            <div class="finances-header">
                <h3>üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                <button class="finances-close-btn-header" onclick="closeFinances()">
                    ‚úï
                </button>
            </div>

            <div class="finances-body">
                <div id="financesLoading" class="finances-loading">
                    üîÑ –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è...
                </div>

                <div id="financesError" class="finances-error" style="display: none;">
                    ‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è. –ú–æ–ª—è –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.
                </div>

                <div id="financesData" style="display: none;">
                    <!-- Summary Cards -->
                    <div class="finances-summary">
                        <div class="summary-card">
                            <span class="summary-card-icon">üìã</span>
                            <div class="summary-card-label">–û–±—â–æ –∑–∞–¥–∞–Ω–∏—è</div>
                            <div class="summary-card-value" id="totalTasks">-</div>
                        </div>
                        <div class="summary-card">
                            <span class="summary-card-icon">üíµ</span>
                            <div class="summary-card-label">–û–±—â–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç</div>
                            <div class="summary-card-value" id="totalAmount">- –ª–≤.</div>
                        </div>
                        <div class="summary-card">
                            <span class="summary-card-icon">‚úÖ</span>
                            <div class="summary-card-label">–ò–∑–ø–ª–∞—Ç–µ–Ω–æ</div>
                            <div class="summary-card-value" id="totalPaid">- –ª–≤.</div>
                        </div>
                        <div class="summary-card highlight">
                            <span class="summary-card-icon">‚è≥</span>
                            <div class="summary-card-label">–ó–∞ –∏–∑–ø–ª–∞—â–∞–Ω–µ</div>
                            <div class="summary-card-value" id="totalToPay">- –ª–≤.</div>
                        </div>
                    </div>

                    <!-- Detailed Data Section -->
                    <div class="finances-data-section">
                        <div class="section-title">
                            üìä –î–µ—Ç–∞–π–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                        </div>
                        <div class="finances-cards" id="financesCardsContainer">
                            <!-- Financial data cards will be loaded here -->
                        </div>
                        <!-- Payments History Section -->
                    </div>
                    <div class="finances-data-section">
                        <div class="section-title">
                            üí≥ –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –Ω–∞ –ø–ª–∞—â–∞–Ω–∏—è—Ç–∞
                        </div>
                        <div id="paymentsHistoryContainer">
                            <!-- Payments history will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="finances-footer">
                <button class="finances-close-btn" onclick="closeFinances()">
                    ‚úï –ó–∞—Ç–≤–æ—Ä–∏
                </button>
            </div>
        </div>
    </div>
    <script src="js/config.js?v=nc1"></script>
    <script src="js/auth.js?v=nc1"></script>
    <script src="js/contract.js?v=nc1"></script>
    <script src="js/assignments.js?v=nc1"></script>
    <script src="js/finances.js?v=nc1"></script>
    <script src="js/modal.js?v=nc1"></script>
    <script src="js/events.js?v=nc1"></script>
</body>
</html>